<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>★保存用★マイページ/カレンダー</title>
	<style>
		/* ページ全体の中央寄せ設定 */
		.calendar-container {
			text-align: center;
		}

		/* カレンダーの全体のスタイル設定 */
		table {
			width: 90%;
			/* カレンダーの幅を90%に設定 */
			margin: 0 auto;
			/* カレンダー自体を中央寄せ */
			border-collapse: collapse;
		}

		/* セルのスタイル設定 */
		th {
			background-color: #f2f2f2;
			height: 50px;
			/* 曜日の高さを指定 */
			border: 1px solid #ccc;
			text-align: center;
			/* 水平方向の中央寄せ */
			vertical-align: middle;
			/* 垂直方向の中央寄せ */
			padding: 10px;
			width: 14.28%;
			/* 7列で均等になるように幅を設定 */
		}

		td {
			height: 100px;
			/* カレンダーの日付セルの高さを指定 */
			border: 1px solid #ccc;
			text-align: center;
			/* セル内のテキストを中央寄せ */
			padding: 10px;
			vertical-align: top;
			width: 14.28%;
			/* 7列で均等になるように幅を設定 */
			position: relative;
			/* 擬似要素の位置を相対的に設定 */
		}

		/* 今日の日付を目立たせるスタイル */
		.today {
			background-color: #ffeb3b;
			/* 背景色を黄色に設定 */
			font-weight: bold;
			/* 文字を太字に設定 */
			color: #d32f2f;
			/* 文字色を赤に設定 */
			position: relative;
			/* 擬似要素の位置を相対的に設定 */
		}

		.today::after {
			content: "今日";
			/* 今日という文字を追加 */
			position: absolute;
			/* 絶対位置に設定 */
			top: 30%;
			/* 垂直位置を30%に設定 */
			left: 50%;
			/* 水平中央に配置 */
			transform: translate(-50%, -30%);
			/* 垂直中央寄せを30%に設定 */
			font-size: 15px;
			/* 文字サイズを15pxに設定 */
			color: #d32f2f;
			/* 文字色 */
		}

		/* 日曜日のテキスト色を赤に設定 */
		.sunday {
			color: red;
		}

		/* 土曜日のテキスト色を青に設定 */
		.saturday {
			color: blue;
		}

		/* ナビゲーションボタンのスタイル設定 */
		.navigation {
			text-align: center;
			margin: 20px 0;
		}

		.navigation button {
			padding: 10px;
			font-size: 16px;
		}

		/* イベント表示部分のスタイル設定 */
		.event {
			background-color: #90ee90;
			/* 背景色を黄緑色に設定 */
			margin-top: 5px;
			padding: 2px;
			font-size: 12px;
			width: 80%;
			/* イベントの幅を指定 */
			margin: 5px auto;
			/* 上下に余白を持たせ、中央寄せ */
			text-align: center;
			/* イベントのテキストを中央寄せ */
		}

		/* タイトルを中央寄せ */
		h1 {
			text-align: center;
		}

		/* 日時選択部分のスタイル設定 */
		.datetime-container {
			margin: 20px;
			display: flex;
			/* 要素を横に並べるためにフレックスボックスを使用 */
			justify-content: center;
			/* 水平方向に中央揃え */
			align-items: center;
			/* 垂直方向に中央揃え */
		}

		.datetime-container label {
			margin-right: 10px;
		}

		.datetime-container select {
			padding: 5px;
			font-size: 14px;
			margin-right: 10px;
			/* ボタンとの間にスペースを追加 */
		}

		.datetime-container button {
			padding: 10px;
			font-size: 16px;
			/* ボタンの文字サイズ */
		}

		/* 注文履歴部分のスタイル設定 */
		.order-history-container {
			margin-top: 40px;
			text-align: center;
			/* タイトルを中央寄せ */
		}

		.order-history {
			width: 80%;
			/* 履歴の幅を指定 */
			margin: 0 auto;
			/* 中央寄せ */
			max-height: 400px;
			/* 最大高さを指定して、スクロールバーを出す */
			overflow-y: auto;
			/* 垂直方向のスクロールバーを追加 */
		}

		.order-history table {
			width: 100%;
			border-collapse: collapse;
			text-align: center;
		}

		/* 注文履歴の項目 */
		.order-history th {
			height: 50px;
			border: 1px solid #ccc;
			padding: 10px;
			text-align: center;
			vertical-align: middle;
		}

		/* 注文履歴の内容 */
		.order-history td {
			height: 100px;
			border: 1px solid #ccc;
			padding: 10px;
			text-align: center;
			vertical-align: middle;
		}
		/* 履歴のスクロール固定 */
		.order-history thead th {
		    position: -webkit-sticky; /* Safari */
		    position: sticky;
		    top: 0;
		    background-color: #f2f2f2;
		    z-index: 1;
		}
	</style>
</head>


<body>

	<!-- カレンダー全体を囲むコンテナ -->
	<div class="calendar-container">

		<!-- カレンダーのタイトル -->
		<h1>★保存用★マイページ/カレンダー</h1>

		<!-- ナビゲーションボタン（先月・来月に切り替え） -->
		<div class="navigation">
			<button onclick="changeMonth(-1)">先月</button>
			<span id="month-year"></span>
			<button onclick="changeMonth(1)">来月</button>
		</div>

		<!-- カレンダーのテーブル -->
		<table id="calendar-table">
			<thead>
				<tr>
					<th class="monday">月</th>
					<th class="tuesday">火</th>
					<th class="wednesday">水</th>
					<th class="thursday">木</th>
					<th class="friday">金</th>
					<th class="saturday">土</th>
					<th class="sunday">日</th>
				</tr>
			</thead>
			<tbody id="calendar-body">
				<!-- JavaScriptで生成されるカレンダーの日付がここに表示されます -->
			</tbody>
		</table>

		<!-- 日時選択部分 -->
		<div class="datetime-container">
			<label for="date-select">日付:</label>
			<select id="date-select">
				<!-- JavaScriptで生成される日付の選択肢がここに表示されます -->
			</select>

			<label for="time-select">時間:</label>
			<select id="time-select">
				<!-- JavaScriptで生成される時間の選択肢がここに表示されます -->
			</select>

			<button onclick="selectDateTime()">決定</button>
		</div>
	</div>

	<!-- 注文履歴表示部分 -->
	<div class="order-history-container">
		<h2>注文履歴</h2>
		<div class="order-history">
			<table>
				<thead>
					<tr>
						<th>注文日時</th>
						<th>店名</th>
						<th>注文内容</th>
						<th>合計金額</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>2024/8/8 12:00</td>
						<td>Hanaのお弁当</td>
						<td>かつ丼</td>
						<td>1200円</td>
					</tr>
					<tr>
						<td>2024/8/10 13:00</td>
						<td>おいしいごはん</td>
						<td>焼肉弁当</td>
						<td>1000円</td>
					</tr>
					<tr>
						<td>2024/8/12 11:00</td>
						<td>ほっかほか弁当</td>
						<td>のり弁当</td>
						<td>900円</td>
					</tr>

				</tbody>
			</table>
		</div>
	</div>

	<script>
		// 現在表示されている日付を保持する変数
		let currentDate = new Date();

		// 今日の日付を取得
		const today = new Date().toDateString();

		// イベントデータを日付ごとに定義 (例: 日付とイベント名の配列)
		const events = {
			"2024-08-04": ["イベントA"],
			"2024-08-10": ["イベントB"],
			"2024-08-15": ["イベントC"],
			"2024-08-25": ["イベントD", "イベントE"],
		};

		// カレンダーを更新する関数
		function updateCalendar() {
			const calendarBody = document.getElementById('calendar-body');
			const monthYear = document.getElementById('month-year');
			const dateSelect = document.getElementById('date-select');
			const timeSelect = document.getElementById('time-select');
			calendarBody.innerHTML = ''; // カレンダーの中身をクリア
			dateSelect.innerHTML = ''; // 日付の選択肢をクリア

			// 現在の月の最初の日と最後の日を取得
			const year = currentDate.getFullYear();
			const month = currentDate.getMonth();
			const firstDay = new Date(year, month, 1);
			const lastDay = new Date(year, month + 1, 0);

			// 月と年を表示
			const options = {year: 'numeric', month: 'long'};
			monthYear.textContent = currentDate.toLocaleDateString('ja-JP', options);

			// 最初の日の曜日を取得し、月曜日始まりに調整
			const startDay = (firstDay.getDay() + 6) % 7;

			// カレンダーの日付を埋める
			let row = document.createElement('tr');
			for (let i = 0; i < startDay; i++) {
				row.appendChild(document.createElement('td')); // 空白セルを追加
			}

			// 月の日付を埋める
			for (let day = 1; day <= lastDay.getDate(); day++) {
				const cell = document.createElement('td');
				const cellDate = new Date(year, month, day);
				const cellDateString = cellDate.toISOString().split('T')[0];
				cell.textContent = day;

				// 今日の日付の場合、クラスを追加して強調表示
				if (cellDate.toDateString() === today) {
					cell.classList.add('today');
				}

				// イベントがある場合、イベントを表示
				if (events[cellDateString]) {
					events[cellDateString].forEach(event => {
						const eventDiv = document.createElement('div');
						eventDiv.className = 'event';
						eventDiv.textContent = event;
						cell.appendChild(eventDiv);
					});
				}

				row.appendChild(cell);

				if ((startDay + day) % 7 === 0) {
					calendarBody.appendChild(row);
					row = document.createElement('tr');
				}
			}

			// 最後の行に空白セルを追加して、7列に調整
			if (row.children.length > 0) {
				while (row.children.length < 7) {
					row.appendChild(document.createElement('td'));
				}
				calendarBody.appendChild(row);
			}

			// 日付の選択肢を追加
			for (let day = 1; day <= lastDay.getDate(); day++) {
				const option = document.createElement('option');
				option.value = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
				option.textContent = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
				dateSelect.appendChild(option);
			}

			// 時間の選択肢を追加
			timeSelect.innerHTML = ''; // 時間の選択肢をクリア
			for (let hour = 8; hour <= 20; hour++) {
				for (let minute = 0; minute < 60; minute += 30) {
					const option = document.createElement('option');
					option.value = `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;
					option.textContent = `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;
					timeSelect.appendChild(option);
				}
			}
		}

		// 月を変更する関数
		function changeMonth(offset) {
			currentDate.setMonth(currentDate.getMonth() + offset);
			updateCalendar();
		}

		// 日時を選択する関数
		function selectDateTime() {
			const date = document.getElementById('date-select').value;
			const time = document.getElementById('time-select').value;
			alert(`選択した日付と時間: ${date} ${time}`);
		}

		// 初期カレンダーを表示
		updateCalendar();
	</script>

</body>

</html>